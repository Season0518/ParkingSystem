(function(e){function t(t){for(var r,i,l=t[0],o=t[1],c=t[2],d=0,p=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,l=1;l<a.length;l++){var o=a[l];0!==s[o]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"0941":function(e,t,a){},"164a":function(e,t,a){"use strict";a("0941")},"1a0a":function(e,t,a){},"38f3":function(e,t,a){e.exports=a.p+"img/1.fe8eb85d.jpg"},"41da":function(e,t,a){"use strict";a("d992")},4927:function(e,t,a){},"49a5":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("a026"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],i=(a("034f"),a("2877")),l={},o=Object(i["a"])(l,s,n,!1,null,null,null),c=o.exports,u=a("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"login_bg",attrs:{"element-loading-text":"正在登录中,请稍等！","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e.registerShow?e._e():r("div",{staticClass:"block"},[r("el-carousel",{attrs:{height:"500px"}},[r("el-carousel-item",[r("img",{attrs:{src:a("38f3"),alt:""}})]),r("el-carousel-item",[r("img",{attrs:{src:a("cedd"),alt:""}})]),r("el-carousel-item",[r("img",{attrs:{src:a("a760"),alt:""}})]),r("el-carousel-item",[r("img",{attrs:{src:a("ab86"),alt:""}})])],1)],1),e.registerShow?e._e():r("div",{staticClass:"login_box"},[e._m(0),r("el-form",{ref:"rules",staticClass:"login_form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}},[r("i",{staticClass:"fa fa-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}},[r("i",{staticClass:"fa fa-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1),r("span",{staticClass:"register",on:{click:e.toRegister}},[e._v("立即注册")])],1),e.registerShow?r("div",{staticClass:"register-box"},[r("h2",[e._v("用户注册")]),r("el-form",{ref:"registerRules",staticClass:"demo-ruleForm",attrs:{model:e.registerUser,"status-icon":"",rules:e.registerRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名"},model:{value:e.registerUser.username,callback:function(t){e.$set(e.registerUser,"username",t)},expression:"registerUser.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.registerUser.password,callback:function(t){e.$set(e.registerUser,"password",t)},expression:"registerUser.password"}})],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"确认密码",prop:"check"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"确认密码","show-password":""},model:{value:e.registerUser.check,callback:function(t){e.$set(e.registerUser,"check",t)},expression:"registerUser.check"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"sex",required:""}},[r("el-radio",{attrs:{label:"男"},model:{value:e.registerUser.sex,callback:function(t){e.$set(e.registerUser,"sex",t)},expression:"registerUser.sex"}},[e._v("男")]),r("el-radio",{attrs:{label:"女"},model:{value:e.registerUser.sex,callback:function(t){e.$set(e.registerUser,"sex",t)},expression:"registerUser.sex"}},[e._v("女")])],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"年龄",prop:"age"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.registerUser.age,callback:function(t){e.$set(e.registerUser,"age",e._n(t))},expression:"registerUser.age"}})],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"车牌号",prop:"card"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入车牌号"},model:{value:e.registerUser.card,callback:function(t){e.$set(e.registerUser,"card",t)},expression:"registerUser.card"}})],1),r("el-form-item",{attrs:{label:"联系电话",prop:"phone",required:""}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入联系电话"},model:{value:e.registerUser.phone,callback:function(t){e.$set(e.registerUser,"phone",t)},expression:"registerUser.phone"}})],1),r("el-form-item",[r("el-button",{staticClass:"register-btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("registerRules")}}},[e._v("注册")]),r("el-button",{on:{click:function(t){return e.resetForm("registerRules")}}},[e._v("重置")])],1)],1),r("span",{staticClass:"to-login",on:{click:e.toLogin}},[e._v(">>返回登录")])],1):e._e()])},p=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-title"},[a("h2",[e._v("登录")])])}],m=(a("8ba4"),a("a9e3"),a("bc3a")),f=a.n(m),g={data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("用户名不能为空"));setTimeout((function(){f.a.get("/api/user/checkUsername?username="+t).then((function(e){e.data.data?a():a(new Error("用户名已存在"))}))}),10)},a=function(e,t,a){if(!t)return a(new Error("年龄不能为空"));setTimeout((function(){Number.isInteger(t)?t<18?a(new Error("必须年满18岁")):a():a(new Error("请输入数字值"))}),1e3)},r=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.registerUser.password?r(new Error("两次输入密码不一致!")):r()};return{registerShow:!1,loading:!1,imgs:["/img/1.jpg","/img/2.jpg","/img/3.jpg","/img/4.jpg"],ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}]},registerUser:{username:"",password:"",check:"",sex:"男",phone:"",age:"",card:""},registerRules:{username:[{validator:t,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],check:[{validator:r,trigger:"blur"}],age:[{validator:a,trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],card:[{required:!0,message:"请输入车牌号",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.loading=!0,f.a.post("/api/user/login",this.ruleForm).then((function(t){e.loading=!1,t.data.data.state?(e.$message.success("登陆成功！"),window.sessionStorage.setItem("token",t.data.data.uid),"admin"==e.ruleForm.username?e.$router.push("/mane"):e.$router.push("/conmen")):e.$message.error("登录失败,"+t.data.data.msg+"!")}))},toRegister:function(){this.registerShow=!0},toLogin:function(){var e=this;this.registerShow=!1,this.$nextTick((function(){e.$refs.rules.resetFields()}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,f.a.post("/api/user/register",t.registerUser).then((function(e){t.loading=!1,e.data.data?(t.$message.success("注册成功！"),t.registerShow=!1):t.$message.error("登录失败,请重新尝试！")}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},h=g,b=(a("d106"),Object(i["a"])(h,d,p,!1,null,"de0d1372",null)),v=b.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home-container"},[r("el-header",[r("div",{staticClass:"left-logo"},[r("img",{attrs:{src:a("f1ca"),alt:"商标Logo"}}),r("span",[e._v("停车场管理系统")])]),r("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("退出")])],1),r("el-container",[r("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[r("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),r("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409EFF","unique-opened":!0,collapse:e.isCollapse,"collapse-transition":!1,router:"","default-active":e.activePath}},e._l(e.menuList,(function(t){return r("el-submenu",{key:t.id,attrs:{index:t.id+""}},[r("template",{slot:"title"},[r("i",{class:e.icons[t.id]}),r("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t){return r("el-menu-item",{key:t.id,attrs:{index:"/"+t.path},on:{click:function(a){return e.savePath("/"+t.path)}}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),r("span",[e._v(e._s(t.name))])])],2)}))],2)})),1)],1),r("el-main",[r("router-view")],1)],1)],1)},w=[],x={data:function(){return{menuList:[{name:"用户管理",id:11,children:[{name:"用户列表",id:111,path:"users"}]},{name:"商品管理",id:13,children:[{name:"商品列表",id:131,path:"shop"}]},{name:"订单管理",id:14,children:[{name:"订单列表",id:141,path:"din"}]},{name:"数据统计",id:15,children:[{name:"销量前十统计",id:151,path:"data"},{name:"总金额统计",id:152,path:"dataprice"}]}],icons:{11:"fa fa-users",12:"fa fa-shield",13:"fa fa-calendar-o",14:"fa fa-list-alt",15:"fa fa-connectdevelop"},isCollapse:!1,activePath:"/users"}},created:function(){this.activePath=window.sessionStorage.getItem("savePath")},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("/login"),this.$message("您已退出登录，请重新登录！")},toggleCollapse:function(){this.isCollapse=!this.isCollapse},savePath:function(e){window.sessionStorage.setItem("savePath",e)}}},_=x,k=(a("bc19"),Object(i["a"])(_,y,w,!1,null,"7928209c",null)),C=k.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",[a("div",{staticClass:"left-logo"},[a("span",[e._v("欢迎"+e._s(e.userInfo.username)+" ")])]),a("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("退出")])],1),a("el-container",[a("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[a("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),a("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409EFF","unique-opened":!0,collapse:e.isCollapse,"collapse-transition":!1,router:"","default-active":e.activePath}},e._l(e.menuList,(function(t){return a("el-submenu",{key:t.id,attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{class:e.icons[t.id]}),a("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/"+t.path},on:{click:function(a){return e.savePath("/"+t.path)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v(e._s(t.name))])])],2)}))],2)})),1)],1),a("el-main",[a("router-view")],1)],1)],1)},U=[],$={data:function(){return{menuList:[{name:"信息管理",id:11,children:[{name:"个人信息",id:111,path:"userInfo"}]},{name:"车位管理",id:13,children:[{name:"车位信息",id:131,path:"carInfo"}]},{name:"费用管理",id:14,children:[{name:"收费信息",id:141,path:"cost"}]}],icons:{11:"fa fa-user-secret",13:"fa fa-taxi",14:"fa fa-ticket"},isCollapse:!1,userInfo:{},activePath:"/users"}},created:function(){this.activePath=window.sessionStorage.getItem("savePath")},methods:{getUserInfo:function(){var e=this,t=window.sessionStorage.getItem("token");f.a.get("/api/user/getUserByUid?uid="+t).then((function(t){e.userInfo=t.data.data}))},logout:function(){window.sessionStorage.clear(),this.$router.push("/login"),this.$message("您已退出登录，请重新登录！")},toggleCollapse:function(){this.isCollapse=!this.isCollapse},savePath:function(e){window.sessionStorage.setItem("savePath",e)}},mounted:function(){this.getUserInfo()}},I=$,q=(a("164a"),Object(i["a"])(I,S,U,!1,null,"51328604",null)),T=q.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("信息管理")]),a("el-breadcrumb-item",[e._v("个人信息")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[a("h2",[e._v("个人基本信息")])])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("用户名："+e._s(e.userInfo.username))])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("联系电话："+e._s(e.userInfo.phone))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("年龄："+e._s(e.userInfo.age)+"岁")])])],1),a("br"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("性别："+e._s(e.userInfo.sex))])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("车牌号："+e._s(e.userInfo.card))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("修改信息")])],1)])],1),a("br"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[e.dataTypeShow?e._e():a("div",{staticClass:"data-type"},[a("h2",{staticClass:"h2-text"},[e._v("停车类型记录")]),a("div",{staticClass:"data-text"},[e._v(" 没有相关记录 ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dataTypeShow,expression:"dataTypeShow"}],staticClass:"grid-content bg-purple",attrs:{id:"myChart"}})]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content bg-purple",attrs:{id:"chart2"}})])],1)],1),a("el-dialog",{attrs:{title:"修改信息",visible:e.editShow,width:"50%",center:""},on:{"update:visible":function(t){e.editShow=t},close:e.editClose}},[a("el-form",{ref:"editRules",attrs:{model:e.editUser,rules:e.editRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.editUser.password,callback:function(t){e.$set(e.editUser,"password",t)},expression:"editUser.password"}})],1),a("el-form-item",{attrs:{label:"车牌号",prop:"card"}},[a("el-input",{model:{value:e.editUser.card,callback:function(t){e.$set(e.editUser,"card",t)},expression:"editUser.card"}})],1),a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{model:{value:e.editUser.phone,callback:function(t){e.$set(e.editUser,"phone",t)},expression:"editUser.phone"}})],1),a("el-form-item",{attrs:{label:"性别"}},[[a("el-radio",{attrs:{label:"男"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("女")])]],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.editClose()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCommit("editRules")}}},[e._v("确认修改")])],1)],1)],1)},E=[],R=(a("b0c0"),a("d3b7"),a("25f0"),a("5319"),a("ac1f"),{data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("年龄不能为空"));setTimeout((function(){Number.isInteger(t)?t<18?a(new Error("必须年满18岁")):a():a(new Error("请输入数字值"))}),1e3)},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.editUser.password?r(new Error("两次输入密码不一致!")):r()};return{userInfo:{},editUser:{password:"",age:"",sex:"",phone:"",card:""},editShow:!1,dataTypes:[],dataMoneyName:[],dataMoneyValue:[],dataTypeShow:!1,editRules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],check:[{validator:a,trigger:"blur"}],age:[{validator:t,trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],card:[{required:!0,message:"请输入车牌号",trigger:"blur"}]}}},methods:{getUserInfo:function(e){var t=this;f.a.get("/api/user/getUserByUid?uid="+e).then((function(e){t.userInfo=e.data.data,t.getUserDataType(t.userInfo.username),t.getUserDataMoney(t.userInfo.username)}))},getUserDataType:function(e){var t=this;f.a.get("/api/user/dataType?person="+e).then((function(e){t.dataTypes=e.data.data,t.dataTypes.length>0?(t.dataTypeShow=!0,t.draw1()):t.dataTypeShow=!1}))},getUserDataMoney:function(e){var t=this;f.a.get("/api/user/dataMoney?person="+e).then((function(e){if(t.dataMoneyName=[],t.dataMoneyValue=[],e.data.data.length>0){for(var a=0;a<e.data.data.length;a++)t.dataMoneyName.push(t.dateFormat(e.data.data[a].name,2)),t.dataMoneyValue.push(e.data.data[a].value);t.draw2()}}))},updateUser:function(){this.editUser.phone=this.userInfo.phone,this.editUser.age=this.userInfo.age,this.editUser.sex=this.userInfo.sex,this.editUser.card=this.userInfo.card,this.editUser.password=this.userInfo.password,this.editShow=!0},editClose:function(){this.editShow=!1},draw1:function(){var e=a("313e"),t=e.init(document.getElementById("myChart")),r={title:{text:"停车类型记录",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"次数",type:"pie",radius:"50%",data:this.dataTypes,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r&&t.setOption(r)},draw2:function(){var e=a("313e"),t=e.init(document.getElementById("chart2")),r={title:{text:"近五天缴费记录",left:"center"},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:{type:"category",axisLabel:{rotate:45},data:this.dataMoneyName},yAxis:{type:"value"},series:[{data:this.dataMoneyValue,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]};r&&t.setOption(r)},editCommit:function(){var e=this;this.editUser.uid=this.userInfo.uid,f.a.post("/api/user/updateByUser",this.editUser).then((function(t){t.data.data?(e.$message.success("修改成功！"),e.getUserInfo(e.userInfo.uid)):e.$message.error("修改失败！"),e.editShow=!1}))},dateFormat:function(e,t){var a=new Date(e),r="Y年M月D日 h:m:s";switch(t){case 1:r="Y年M月D日";break;case 2:r="Y-M-D";break;case 3:r="Y-M-D h:m:s";break}var s=i(r);function n(e){return e=e.toString(),e[1]?e:"0"+e}function i(e){var t=[],r=["Y","M","D","h","m","s"];for(var s in t.push(a.getFullYear()),t.push(n(a.getMonth()+1)),t.push(n(a.getDate())),t.push(n(a.getHours())),t.push(n(a.getMinutes())),t.push(n(a.getSeconds())),t)e=e.replace(r[s],t[s]);return e}return s}},mounted:function(){var e=window.sessionStorage.getItem("token");this.getUserInfo(e)}}),z=R,L=(a("a352"),Object(i["a"])(z,O,E,!1,null,"0d2fd2af",null)),G=L.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("车位管理")]),a("el-breadcrumb-item",[e._v("车位信息")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择停车区域"},model:{value:e.queryInfo.carArea,callback:function(t){e.$set(e.queryInfo,"carArea",t)},expression:"queryInfo.carArea"}},e._l(e.carAreas,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择车位类型"},model:{value:e.queryInfo.carType,callback:function(t){e.$set(e.queryInfo,"carType",t)},expression:"queryInfo.carType"}},e._l(e.carTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择车位状态"},model:{value:e.queryInfo.carState,callback:function(t){e.$set(e.queryInfo,"carState",t)},expression:"queryInfo.carState"}},e._l(e.carStates,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.cars,border:"",stripe:""}},[a("el-table-column",{attrs:{width:"50",label:"序号",align:"center",type:"index"}}),a("el-table-column",{attrs:{label:"车位号",prop:"stallNum",align:"center"}}),a("el-table-column",{attrs:{label:"车位区域",prop:"stallArea",align:"center"}}),a("el-table-column",{attrs:{label:"车位类型",prop:"stallType",align:"center"}}),a("el-table-column",{attrs:{label:"车位状态",prop:"stallState",align:"center"}}),a("el-table-column",{attrs:{label:"车位收费",prop:"stallMoney",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.stallMoney)+"元/时 ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userId?a("el-button",{attrs:{type:"info",icon:"el-icon-thumb",disabled:""},on:{click:function(a){return e.useStall(t.row.sid)}}},[e._v("预定")]):a("el-button",{attrs:{type:"danger",icon:"el-icon-thumb"},on:{click:function(a){return e.useStall(t.row.sid)}}},[e._v("预定")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},F=[],A=a("1da1"),D=(a("96cf"),{data:function(){return{total:0,loading:!0,queryInfo:{carArea:"",carType:"",carState:"",pagenum:1,pageSize:6},cars:[],uid:void 0,carAreas:[{value:null,label:"全部"},{value:"青山镇南小区",label:"青山镇南小区"},{value:"永安小区",label:"永安小区"}],carTypes:[{value:null,label:"全部"},{value:"临时车位",label:"临时车位"},{value:"固定车位",label:"固定车位"}],carStates:[{value:null,label:"全部"},{value:"已停车",label:"已停车"},{value:"空闲中",label:"空闲中"}]}},methods:{getList:function(){var e=this;f.a.post("/api/stall/getStallList",this.queryInfo).then((function(t){e.loading=!1,e.total=t.data.data.total,e.cars=t.data.data.records}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()},useStall:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将预定该车位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消预定！"):f.a.get("/api/stall/orderStall?uid="+t.uid+"&sid="+e).then((function(e){e.data.data?(t.$message.success("预定成功！"),t.getList()):t.$message.error("预定失败！")}));case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getList(),this.uid=window.sessionStorage.getItem("token")}}),N=D,j=Object(i["a"])(N,M,F,!1,null,null,null),P=j.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("费用管理")]),a("el-breadcrumb-item",[e._v("收费信息")])],1),a("el-card",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"left"},[a("div",{staticClass:"top"},[a("h2",[e._v("账户余额")]),e.userInfo.money?a("div",{staticClass:"count"},[a("span",{staticClass:"num"},[e._v(e._s(e.userInfo.money.toFixed(2)))]),a("span",{staticClass:"text"},[e._v("￥")])]):e._e(),a("el-button",{staticClass:"pay-btn",attrs:{type:"primary"},on:{click:e.toPay}},[e._v("立即充值")])],1),a("div",{staticClass:"bottom"},[a("h2",[e._v("待缴费")]),e._l(e.dRes,(function(t){return a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"area"},[e._v(e._s(t.stall.stallArea))])]),a("el-col",{attrs:{span:4}},[a("samp",{staticClass:"stall-num"},[e._v(e._s(t.stall.stallNum))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"create-time"},[e._v(e._s(t.createTime))])]),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.payStall(t)}}},[e._v("立即缴费")])],1)],1)})),0==e.dRes.length?a("div",{staticClass:"no-res"},[e._v(" 没有相关记录 ")]):e._e()],2)])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"right"},[a("h2",[e._v("停车缴费记录")]),e._l(e.allStallRes,(function(t){return a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"area"},[e._v(e._s(t.stall.stallArea))])]),a("el-col",{attrs:{span:4}},[a("samp",{staticClass:"stall-num"},[e._v(e._s(t.stall.stallNum))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"create-time"},[e._v(e._s(t.createTime))])]),a("el-col",{attrs:{span:6}},[t.money?a("span",{staticClass:"money"},[e._v("缴费："+e._s(t.money)+"元")]):a("span",{staticClass:"money num-red"},[e._v("待缴费："+e._s(e.feeChange(t))+"元")])])],1)})),0==e.allStallRes.length?a("div",{staticClass:"no-res"},[e._v(" 没有相关记录 ")]):e._e()],2)])],1)],1),a("el-dialog",{attrs:{title:"充值",visible:e.payShow,width:"500px",center:""},on:{"update:visible":function(t){e.payShow=t},close:e.payClose}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"充值金额"},on:{blur:e.checkMoney},model:{value:e.payMoney,callback:function(t){e.payMoney=e._n(t)},expression:"payMoney"}}),a("br"),e.msgShow?a("span",{staticClass:"pay-msg"},[e._v(e._s(e.payMsg))]):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.payClick}},[e._v("确认充值")])],1)],1)],1)},Y=[],V={data:function(){return{allStallRes:[],userInfo:{},payShow:!1,payMoney:"",payMsg:"",msgShow:!1,dRes:[]}},methods:{getAllStallRes:function(e){var t=this;f.a.get("/api/stall/allRes?person="+e).then((function(e){t.allStallRes=e.data.data}))},getUserInfo:function(e){var t=this;f.a.get("/api/user/getUserByUid?uid="+e).then((function(e){t.userInfo=e.data.data,t.userInfo.username&&(t.getAllStallRes(t.userInfo.username),t.getUserNoPay(t.userInfo.username))}))},getUserNoPay:function(e){var t=this;f.a.get("/api/stall/allNoPay?person="+e).then((function(e){t.dRes=e.data.data}))},getUserStallRes:function(e){var t=this;f.a.get("/api/stall/allRes?uid="+e).then((function(e){t.yRes=e.data.data}))},feeChange:function(e){var t=new Date(e.createTime),a=new Date,r=(a.getTime()-t.getTime())/36e5;return Math.floor(10*r)/10*e.stall.stallMoney},toPay:function(){this.payMoney="",this.payShow=!0},checkMoney:function(){"number"===typeof this.payMoney?(this.msgShow=!1,this.payMsg=""):(this.msgShow=!0,this.payMsg="请输入正确的金额数值")},payClick:function(){var e=this;if("number"===typeof this.payMoney){var t=window.sessionStorage.getItem("token");f.a.post("/api/user/userPay",{uid:t,money:this.payMoney}).then((function(a){a.data.data?(e.$message.success("充值成功！"),e.getUserInfo(t),e.payClose()):e.$message.error("充值失败，请重新尝试")}))}else this.$message.info("输入金额错误，充值失败！"),this.payClose()},payClose:function(){this.payShow=!1,this.msgShow=!1,this.payMsg=""},payStall:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("该次停车缴费"+t.feeChange(e)+"元?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消停车缴费！"):(s={},s.pid=e.pid,s.person=e.person,s.stallId=e.stallId,s.money=t.feeChange(e),f.a.post("/api/stall/payMoneyPerson",s).then((function(e){e.data.data.flag?(t.$message.success("停车缴费成功！"),t.getAllStallRes(t.userInfo.username),t.getUserNoPay(t.userInfo.username)):t.$message.error(e.data.data.msg)})));case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){var e=window.sessionStorage.getItem("token");this.getUserInfo(e)}},H=V,Z=(a("c19a"),Object(i["a"])(H,B,Y,!1,null,"b354a9e8",null)),J=Z.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}})],1),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.queryInfo.sex,callback:function(t){e.$set(e.queryInfo,"sex",t)},expression:"queryInfo.sex"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.users,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"姓名",prop:"uname"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),a("el-table-column",{attrs:{label:"电话",prop:"telephone"}}),a("el-table-column",{attrs:{label:"性别",prop:"sex"}}),a("el-table-column",{attrs:{label:"状态",prop:"ustate"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"在线","inactive-color":"#ff4949","inactive-text":"冻结"},on:{change:function(a){return e.stateChange(t.row.uid,t.row.ustate)}},model:{value:t.row.ustate,callback:function(a){e.$set(t.row,"ustate",a)},expression:"scope.row.ustate"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.userDelete(t.row.uid)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[6,12],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改用户",visible:e.editShow,width:"50%",center:""},on:{"update:visible":function(t){e.editShow=t},close:e.editClose}},[a("el-form",{ref:"editRules",attrs:{model:e.editUser,rules:e.editRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"uname"}},[a("el-input",{model:{value:e.editUser.uname,callback:function(t){e.$set(e.editUser,"uname",t)},expression:"editUser.uname"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.editUser.password,callback:function(t){e.$set(e.editUser,"password",t)},expression:"editUser.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editUser.email,callback:function(t){e.$set(e.editUser,"email",t)},expression:"editUser.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[a("el-input",{model:{value:e.editUser.telephone,callback:function(t){e.$set(e.editUser,"telephone",t)},expression:"editUser.telephone"}})],1),a("el-form-item",{attrs:{label:"性别"}},[[a("el-radio",{attrs:{label:"男"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("女")])]],2),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editUser.birthday,callback:function(t){e.$set(e.editUser,"birthday",t)},expression:"editUser.birthday"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.editClose()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCommit("editRules")}}},[e._v("确认修改")])],1)],1),a("el-dialog",{attrs:{title:"新增用户",visible:e.addShow,width:"50%",center:""},on:{"update:visible":function(t){e.addShow=t},close:e.addClose}},[a("el-form",{ref:"editRules",attrs:{model:e.editUser,rules:e.editRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.editUser.username,callback:function(t){e.$set(e.editUser,"username",t)},expression:"editUser.username"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"uname"}},[a("el-input",{model:{value:e.editUser.uname,callback:function(t){e.$set(e.editUser,"uname",t)},expression:"editUser.uname"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.editUser.password,callback:function(t){e.$set(e.editUser,"password",t)},expression:"editUser.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editUser.email,callback:function(t){e.$set(e.editUser,"email",t)},expression:"editUser.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"telephone"}},[a("el-input",{model:{value:e.editUser.telephone,callback:function(t){e.$set(e.editUser,"telephone",t)},expression:"editUser.telephone"}})],1),a("el-form-item",{attrs:{label:"性别"}},[[a("el-radio",{attrs:{label:"男"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("女")])]],2),a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editUser.birthday,callback:function(t){e.$set(e.editUser,"birthday",t)},expression:"editUser.birthday"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.addClose()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCommit("editRules")}}},[e._v("确认添加")])],1)],1)],1)},X=[],K={data:function(){var e=function(e,t,a){var r=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;""==t?a(new Error("请输入邮箱")):r.test(t)?a():a(new Error("请输入合法邮箱"))},t=function(e,t,a){var r=/^((0\d{2,3}-\d{7,8})|(1[3456789]\d{9}))$/;""==t?a(new Error("请输入手机号")):r.test(t)?a():a(new Error("请输入合法手机号"))},a=function(e,t,a){var r=/^\w{6,16}$/;""==t?a(new Error("请输入密码")):r.test(t)?a():a(new Error("密码为6~16位数字、字母下划线组成"))},r=function(e,t,a){var r=/^\w{4,16}$/;""==t?a(new Error("请输入用户名")):r.test(t)?f.a.post("/api/ssm/user/checkUserRegist",{username:t}).then((function(e){e.data.flag?a(new Error("用户名已存在！")):a()})):a(new Error("用户名为4~16位数字、字母下划线组成"))};return{total:0,loading:!0,queryInfo:{query:"",sex:"",pagenum:1,pageSize:6},users:[],options:[{value:"5",label:"全部"},{value:"男",label:"男"},{value:"女",label:"女"}],editShow:!1,addShow:!1,editUser:{uid:"",username:"",uname:"",email:"",telephone:"",sex:"",birthday:"",password:""},editRules:{uname:[{required:!0,message:"请输入用户名",trigger:"blur"}],username:[{required:!0,validator:r,trigger:"blur"}],email:[{required:!0,validator:e,trigger:"blur"}],telephone:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,validator:a,trigger:"blur"}],birthday:[{required:!0,message:"请选择出生日期",trigger:"blur"}]}}},methods:{getList:function(){var e=this;5==this.queryInfo.sex&&(this.queryInfo.sex=""),f.a.post("/api/ssm/user/getUsersGao",this.queryInfo).then((function(t){for(var a in e.loading=!1,e.total=t.data.count,e.users=t.data.list,e.users)e.users[a].ustate=1==e.users[a].ustate}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()},stateChange:function(e,t){var a=this,r=1==t?1:0;f.a.post("/api/ssm/user/updateUserState",{uid:e,state:r}).then((function(e){e.data.flag?a.$message.success("修改成功！"):(a.$message.error("修改失败！"),a.getList())}))},toEdit:function(e){this.editUser.uid=e.uid,this.editUser.uname=e.uname,this.editUser.password=e.password,this.editUser.sex=e.sex,this.editUser.email=e.email,this.editUser.telephone=e.telephone,this.editUser.birthday=e.birthday,this.editShow=!0},editClose:function(){var e=this;this.editShow=!1,this.$nextTick((function(){e.$refs.editRules.resetFields()}))},editCommit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.editUser.birthday=new Date(t.editUser.birthday).getTime(),f.a.post("/api/ssm/user/updateUserBase",t.editUser).then((function(e){e.data.flag?(t.$message.success("修改成功！"),t.getList()):t.$message.error("修改失败！"),t.editShow=!1}))}))},addUser:function(){for(var e in this.editUser)this.editUser[e]="";this.editUser.sex="男",this.addShow=!0},addClose:function(){var e=this;this.addShow=!1,this.$nextTick((function(){e.$refs.editRules.resetFields()}))},addCommit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.editUser.birthday=new Date(t.editUser.birthday).getTime(),f.a.post("/api/ssm/user/addUser",t.editUser).then((function(e){e.data.flag?(t.$message.success("添加成功！"),t.getList(),t.addShow=!1):t.$message.error("添加失败！")}))}))},userDelete:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消删除！"):f.a.get("/api/ssm/user/deleteUser?uid="+e).then((function(e){e.data.flag?(t.$message.success("删除成功！"),t.getList()):t.$message.error("删除失败！")}));case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getList()}},Q=K,ee=(a("6538"),Object(i["a"])(Q,W,X,!1,null,"3f6ef0e4",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",[a("div",{staticClass:"left-logo"},[a("span",[e._v("欢迎"+e._s(e.userInfo.username)+" 管理员")])]),a("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("退出")])],1),a("el-container",[a("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[a("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),a("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409EFF","unique-opened":!0,collapse:e.isCollapse,"collapse-transition":!1,router:"","default-active":e.activePath}},e._l(e.menuList,(function(t){return a("el-submenu",{key:t.id,attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{class:e.icons[t.id]}),a("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/"+t.path},on:{click:function(a){return e.savePath("/"+t.path)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v(e._s(t.name))])])],2)}))],2)})),1)],1),a("el-main",[a("router-view")],1)],1)],1)},re=[],se={data:function(){return{menuList:[{name:"系统管理",id:11,children:[{name:"用户管理",id:111,path:"userMane"}]},{name:"车位信息管理",id:13,children:[{name:"车位管理",id:131,path:"carmaneger"}]},{name:"费用管理",id:14,children:[{name:"费用信息",id:141,path:"money"}]},{name:"车辆信息管理",id:15,children:[{name:"车辆信息",id:151,path:"stallMane"}]},{name:"车辆进出管理",id:16,children:[{name:"车辆进出",id:161,path:"carInMane"}]}],icons:{11:"fa fa-user-secret",13:"fa fa-taxi",14:"fa fa-ticket",15:"fa fa-industry",16:"fa fa-sign-out"},isCollapse:!1,userInfo:{},activePath:"/users"}},created:function(){this.activePath=window.sessionStorage.getItem("savePath")},methods:{getUserInfo:function(){var e=this,t=window.sessionStorage.getItem("token");f.a.get("/api/user/getUserByUid?uid="+t).then((function(t){e.userInfo=t.data.data}))},logout:function(){window.sessionStorage.clear(),this.$router.push("/login"),this.$message("您已退出登录，请重新登录！")},toggleCollapse:function(){this.isCollapse=!this.isCollapse},savePath:function(e){window.sessionStorage.setItem("savePath",e)}},mounted:function(){this.getUserInfo()}},ne=se,ie=(a("e4d2"),Object(i["a"])(ne,ae,re,!1,null,"4ec016e4",null)),le=ie.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("车位信息管理")]),a("el-breadcrumb-item",[e._v("车位管理")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择停车区域"},model:{value:e.queryInfo.carArea,callback:function(t){e.$set(e.queryInfo,"carArea",t)},expression:"queryInfo.carArea"}},e._l(e.carAreas,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择车位类型"},model:{value:e.queryInfo.carType,callback:function(t){e.$set(e.queryInfo,"carType",t)},expression:"queryInfo.carType"}},e._l(e.carTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择车位状态"},model:{value:e.queryInfo.carState,callback:function(t){e.$set(e.queryInfo,"carState",t)},expression:"queryInfo.carState"}},e._l(e.carStates,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addCar}},[e._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.cars,border:"",stripe:""}},[a("el-table-column",{attrs:{width:"50",label:"序号",align:"center",type:"index"}}),a("el-table-column",{attrs:{label:"车位号",prop:"stallNum",align:"center"}}),a("el-table-column",{attrs:{label:"车位区域",prop:"stallArea",align:"center"}}),a("el-table-column",{attrs:{label:"车位类型",prop:"stallType",align:"center"}}),a("el-table-column",{attrs:{label:"车位状态",prop:"stallState",align:"center"}}),a("el-table-column",{attrs:{label:"车位收费",prop:"stallMoney",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.stallMoney)+"元/时 ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.carDelete(t.row.sid)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增车位",visible:e.addShow,width:"500px",center:""},on:{"update:visible":function(t){e.addShow=t},close:e.addClose}},[a("el-form",{ref:"registerRules",staticClass:"demo-ruleForm",attrs:{model:e.registerCar,"status-icon":"",rules:e.registerRules,"label-width":"100px"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"车位号",prop:"stallNum"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入车位号"},model:{value:e.registerCar.stallNum,callback:function(t){e.$set(e.registerCar,"stallNum",t)},expression:"registerCar.stallNum"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"车位区域",prop:"stallArea"}},[a("el-select",{attrs:{placeholder:"请输入车位区域"},model:{value:e.registerCar.stallArea,callback:function(t){e.$set(e.registerCar,"stallArea",t)},expression:"registerCar.stallArea"}},e._l(e.carAreas,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"车位类型",prop:"stallType"}},[a("el-select",{attrs:{placeholder:"请选择车位类型"},model:{value:e.registerCar.stallType,callback:function(t){e.$set(e.registerCar,"stallType",t)},expression:"registerCar.stallType"}},e._l(e.carTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("registerRules")}}},[e._v("确认添加")])],1)],1),a("el-dialog",{attrs:{title:"修改车位",visible:e.editShow,width:"500px",center:""},on:{"update:visible":function(t){e.editShow=t},close:e.editClose}},[a("el-form",{ref:"registerRules",staticClass:"demo-ruleForm",attrs:{model:e.editCar,"status-icon":"",rules:e.registerRules,"label-width":"100px"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"车位号",prop:"stallNum"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入车位号"},model:{value:e.editCar.stallNum,callback:function(t){e.$set(e.editCar,"stallNum",t)},expression:"editCar.stallNum"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"车位区域",prop:"stallArea"}},[a("el-select",{attrs:{placeholder:"请输入车位区域"},model:{value:e.editCar.stallArea,callback:function(t){e.$set(e.editCar,"stallArea",t)},expression:"editCar.stallArea"}},e._l(e.carAreas,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"车位类型",prop:"stallType"}},[a("el-select",{attrs:{placeholder:"请选择车位类型"},model:{value:e.editCar.stallType,callback:function(t){e.$set(e.editCar,"stallType",t)},expression:"editCar.stallType"}},e._l(e.carTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.editClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editSend("registerRules")}}},[e._v("确认修改")])],1)],1)],1)},ce=[],ue={data:function(){return{total:0,loading:!0,queryInfo:{carArea:"",carType:"",carState:"",pagenum:1,pageSize:6},cars:[],registerCar:{},editCar:{sid:"",stallNum:"",stallArea:"",stallType:""},editShow:!1,uid:void 0,addShow:!1,registerRules:{stallNum:[{required:!0,message:"请输入车牌号",trigger:"blur"}],stallArea:[{required:!0,message:"请选择车位区域",trigger:"blur"}],stallType:[{required:!0,message:"请选择车位类型",trigger:"blur"}]},carAreas:[],carTypes:[{value:null,label:"全部"},{value:"临时车位",label:"临时车位"},{value:"固定车位",label:"固定车位"}],carStates:[{value:null,label:"全部"},{value:"已停车",label:"已停车"},{value:"空闲中",label:"空闲中"}]}},methods:{getList:function(){var e=this;f.a.post("/api/stall/getStallList",this.queryInfo).then((function(t){e.loading=!1,e.total=t.data.data.total,e.cars=t.data.data.records}))},getCommunityList:function(){var e=this;f.a.get("/api/community/list").then((function(t){e.carAreas=[],e.carAreas.push({value:null,label:"全部"});for(var a=0;a<t.data.data.length;a++){var r={value:t.data.data[a].zname,label:t.data.data[a].zname};e.carAreas.push(r)}}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()},addCar:function(){for(var e in this.registerCar)this.registerCar[e]="";"全部"==this.carTypes[0].label&&(this.carTypes.shift(),this.carAreas.shift()),this.addShow=!0},addClose:function(){var e=this;"全部"!=this.carTypes[0].label&&(this.carTypes.unshift({value:null,label:"全部"}),this.carAreas.unshift({value:null,label:"全部"})),this.addShow=!1,this.$nextTick((function(){e.$refs.registerRules.resetFields()}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,f.a.post("/api/stall/add",t.registerCar).then((function(e){t.loading=!1,e.data.data.flag?(t.$message.success("添加成功！"),t.getList(),t.addShow=!1):t.$message.error(e.data.data.msg)}))}))},toEdit:function(e){"全部"==this.carTypes[0].label&&(this.carTypes.shift(),this.carAreas.shift()),this.editCar.sid=e.sid,this.editCar.stallArea=e.stallArea,this.editCar.stallNum=e.stallNum,this.editCar.stallType=e.stallType,this.editShow=!0},editClose:function(){var e=this;"全部"!=this.carTypes[0].label&&(this.carTypes.unshift({value:null,label:"全部"}),this.carAreas.unshift({value:null,label:"全部"})),this.editShow=!1,this.$nextTick((function(){e.$refs.registerRules.resetFields()}))},editSend:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,f.a.post("/api/stall/update",t.editCar).then((function(e){t.loading=!1,e.data.data.flag?(t.$message.success("更新成功"),t.getList(),t.editShow=!1):t.$message.error(e.data.data.msg)}))}))},useStall:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将预定该车位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消预定！"):f.a.get("/api/stall/orderStall?uid="+t.uid+"&sid="+e).then((function(e){e.data.data?(t.$message.success("预定成功！"),t.getList()):t.$message.error("预定失败！")}));case 4:case"end":return a.stop()}}),a)})))()},carDelete:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该车位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消删除！"):f.a.get("/api/stall/del?sid="+e).then((function(e){e.data.data?(t.$message.success("删除成功！"),t.getList()):t.$message.error("删除失败，青虫性操作！")}));case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getList(),this.getCommunityList()}},de=ue,pe=Object(i["a"])(de,oe,ce,!1,null,null,null),me=pe.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("车辆进出管理")]),a("el-breadcrumb-item",[e._v("车辆进出")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.queryInfo.person,callback:function(t){e.$set(e.queryInfo,"person",t)},expression:"queryInfo.person"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择区域"},model:{value:e.queryInfo.stallArea,callback:function(t){e.$set(e.queryInfo,"stallArea",t)},expression:"queryInfo.stallArea"}},e._l(e.carAreas,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.stallRes,border:"",stripe:""}},[a("el-table-column",{attrs:{width:"50",label:"序号",align:"center",type:"index"}}),a("el-table-column",{attrs:{label:"用户名",prop:"person",align:"center"}}),a("el-table-column",{attrs:{label:"驶入时间",prop:"createTime",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.dateFormat(t.row.createTime,3))+" ")]}}])}),a("el-table-column",{attrs:{label:"驶出时间",prop:"overTime",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.overTime?a("span",[e._v(e._s(e.dateFormat(t.row.overTime,3)))]):a("el-tag",{attrs:{type:"success"}},[e._v("未驶出")])]}}])}),a("el-table-column",{attrs:{label:"车位区域",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.stall.stallArea)+" ")]}}])}),a("el-table-column",{attrs:{label:"车位号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.stall.stallNum)+" ")]}}])}),a("el-table-column",{attrs:{label:"收费",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.overTime?a("span",[e._v(e._s(t.row.money)+"元")]):a("span",{staticClass:"fee-in"},[e._v(e._s(e.feeChange(t.row))+"元")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"驶出扣费",placement:"top-start"}},[t.row.overTime?a("el-button",{attrs:{type:"info",icon:"el-icon-finished",circle:"",disabled:""},on:{click:function(a){return e.opare(t.row)}}}):a("el-button",{attrs:{type:"warning",icon:"el-icon-finished",circle:""},on:{click:function(a){return e.opare(t.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ge=[],he={data:function(){return{total:0,loading:!0,times:"",queryInfo:{person:"",stallArea:"",inTime:"",outTime:"",pagenum:1,pageSize:6},carAreas:[],stallRes:[]}},methods:{getList:function(){var e=this;null!=this.times&&""!=this.times&&(this.queryInfo.inTime=this.times[0],this.queryInfo.outTime=this.times[1]),f.a.post("/api/stall/allList",this.queryInfo).then((function(t){e.loading=!1,e.total=t.data.data.total,e.stallRes=t.data.data.records}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()},getCommunityList:function(){var e=this;f.a.get("/api/community/list").then((function(t){e.carAreas=[],e.carAreas.push({value:null,label:"全部"});for(var a=0;a<t.data.data.length;a++){var r={value:t.data.data[a].zname,label:t.data.data[a].zname};e.carAreas.push(r)}}))},feeChange:function(e){var t=new Date(e.createTime),a=new Date,r=(a.getTime()-t.getTime())/36e5;return Math.floor(10*r)/10*e.stall.stallMoney},opare:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将"+e.person+"车辆驶出, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消驶出扣费！"):(s={},s.pid=e.pid,s.person=e.person,s.stallId=e.stallId,s.money=t.feeChange(e),f.a.post("/api/stall/payMoney",s).then((function(e){e.data.data?(t.$message.success("驶出扣费成功！"),t.getList()):t.$message.error("驶出扣费失败！")})));case 4:case"end":return a.stop()}}),a)})))()},dateFormat:function(e,t){var a=new Date(e),r="Y年M月D日 h:m:s";switch(t){case 1:r="Y年M月D日";break;case 2:r="Y-M-D";break;case 3:r="Y-M-D h:m:s";break}var s=i(r);function n(e){return e=e.toString(),e[1]?e:"0"+e}function i(e){var t=[],r=["Y","M","D","h","m","s"];for(var s in t.push(a.getFullYear()),t.push(n(a.getMonth()+1)),t.push(n(a.getDate())),t.push(n(a.getHours())),t.push(n(a.getMinutes())),t.push(n(a.getSeconds())),t)e=e.replace(r[s],t[s]);return e}return s}},mounted:function(){this.getList(),this.getCommunityList()}},be=he,ve=(a("686d"),Object(i["a"])(be,fe,ge,!1,null,"72265a7b",null)),ye=ve.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("车辆信息管理")]),a("el-breadcrumb-item",[e._v("车辆信息")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入车牌号",clearable:""},model:{value:e.queryInfo.card,callback:function(t){e.$set(e.queryInfo,"card",t)},expression:"queryInfo.card"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.queryInfo.person,callback:function(t){e.$set(e.queryInfo,"person",t)},expression:"queryInfo.person"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.cars,border:"",stripe:""}},[a("el-table-column",{attrs:{width:"50",label:"序号",align:"center",type:"index"}}),a("el-table-column",{attrs:{label:"车牌号",prop:"card",align:"center"}}),a("el-table-column",{attrs:{label:"车类别",prop:"carType",align:"center"}}),a("el-table-column",{attrs:{label:"用户名",prop:"person",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"xtime",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["admin"!=t.row.username?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}):e._e(),"admin"!=t.row.username?a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh",circle:""},on:{click:function(a){return e.rePassword(t.row.uid)}}}):e._e(),"admin"!=t.row.username?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.userDelete(t.row.uid)}}}):e._e(),"admin"==t.row.username?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",disabled:""},on:{click:function(a){return e.toEdit(t.row)}}}):e._e(),"admin"==t.row.username?a("el-button",{attrs:{disabled:"",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.userDelete(t.row.uid)}}}):e._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},xe=[],_e={data:function(){return{total:0,loading:!0,queryInfo:{person:"",carType:"",card:"",pagenum:1,pageSize:6},cars:[]}},methods:{getList:function(){var e=this;f.a.post("/api/car/getList",this.queryInfo).then((function(t){e.loading=!1,e.total=t.data.data.total,e.cats=t.data.data.records}))}},mounted:function(){this.getList()}},ke=_e,Ce=Object(i["a"])(ke,we,xe,!1,null,null,null),Se=(Ce.exports,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("费用管理")]),a("el-breadcrumb-item",[e._v("费用信息")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入车位类型",clearable:""},model:{value:e.carType,callback:function(t){e.carType=t},expression:"carType"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-magic-stick"},on:{click:function(t){e.feeUserShow=!0}}},[e._v("充值")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.fees,border:"",stripe:""}},[a("el-table-column",{attrs:{width:"50",label:"序号",align:"center",type:"index"}}),a("el-table-column",{attrs:{label:"用户名",prop:"carType",align:"center"}}),a("el-table-column",{attrs:{label:"价位",prop:"money",align:"center"}}),a("el-table-column",{attrs:{label:"价位说明",prop:"moneyDesc",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"feeTime",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.dateFormat(t.row.feeTime,3))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}})]}}])})],1)],1),a("el-dialog",{attrs:{title:"用户充值",visible:e.feeUserShow,width:"50%",center:""},on:{"update:visible":function(t){e.feeUserShow=t},close:function(t){e.feeUserShow=!1}}},[a("el-form",{ref:"feeUserRules",attrs:{model:e.feeUser,rules:e.feeUserRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.feeUser.username,callback:function(t){e.$set(e.feeUser,"username",t)},expression:"feeUser.username"}})],1),a("el-form-item",{attrs:{label:"金额",prop:"money"}},[a("el-input",{model:{value:e.feeUser.money,callback:function(t){e.$set(e.feeUser,"money",t)},expression:"feeUser.money"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.feeUserShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.feeUserCon("feeUserRules")}}},[e._v("确认充值")])],1)],1),a("el-dialog",{attrs:{title:"车位类型价格修改",visible:e.feeShow,width:"50%",center:""},on:{"update:visible":function(t){e.feeShow=t},close:e.editClose}},[a("el-form",{attrs:{model:e.feeUser,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"车位类型"}},[a("el-input",{attrs:{disabled:""},model:{value:e.feeEdit.carType,callback:function(t){e.$set(e.feeEdit,"carType",t)},expression:"feeEdit.carType"}})],1),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{model:{value:e.feeEdit.money,callback:function(t){e.$set(e.feeEdit,"money",t)},expression:"feeEdit.money"}})],1),a("el-form-item",{attrs:{label:"价格说明"}},[a("el-input",{model:{value:e.feeEdit.moneyDesc,callback:function(t){e.$set(e.feeEdit,"moneyDesc",t)},expression:"feeEdit.moneyDesc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.editClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCon}},[e._v("确认修改")])],1)],1)],1)}),Ue=[],$e={data:function(){return{total:0,loading:!0,carType:"",fees:[],feeShow:!1,feeEdit:{carType:"",money:"",moneyDesc:""},feeUserShow:!1,feeUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],money:[{required:!0,message:"请输入充值金额",trigger:"blur"}]},feeUser:{username:"",money:""}}},methods:{getList:function(){var e=this;f.a.get("/api/fee/list?carType="+this.carType).then((function(t){e.loading=!1,e.fees=t.data.data}))},toEdit:function(e){this.feeEdit.carType=e.carType,this.feeEdit.money=e.money,this.feeEdit.moneyDesc=e.moneyDesc,this.feeShow=!0,console.log(e)},editClose:function(){this.feeEdit.carType="",this.feeEdit.money="",this.feeEdit.moneyDesc="",this.feeShow=!1},tofeeUser:function(){},feeUserCon:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;f.a.post("/api/fee/userFee",t.feeUser).then((function(e){e.data.data.flag?(t.$message.success("充值成功！"),t.feeUserShow=!1):t.$message.error(e.data.data.msg)}))}))},editCon:function(){var e=this;f.a.post("/api/fee/update",this.feeEdit).then((function(t){e.loading=!1,t.data.data.flag?(e.$message.success("修改成功！"),e.getList(),e.editClose()):e.$message.error(t.data.data.msg)}))},dateFormat:function(e,t){var a=new Date(e),r="Y年M月D日 h:m:s";switch(t){case 1:r="Y年M月D日";break;case 2:r="Y-M-D";break;case 3:r="Y-M-D h:m:s";break}var s=i(r);function n(e){return e=e.toString(),e[1]?e:"0"+e}function i(e){var t=[],r=["Y","M","D","h","m","s"];for(var s in t.push(a.getFullYear()),t.push(n(a.getMonth()+1)),t.push(n(a.getDate())),t.push(n(a.getHours())),t.push(n(a.getMinutes())),t.push(n(a.getSeconds())),t)e=e.replace(r[s],t[s]);return e}return s}},mounted:function(){this.getList()}},Ie=$e,qe=Object(i["a"])(Ie,Se,Ue,!1,null,null,null),Te=qe.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("车辆信息管理")]),a("el-breadcrumb-item",[e._v("车辆信息")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"车牌号",clearable:""},model:{value:e.queryInfo.card,callback:function(t){e.$set(e.queryInfo,"card",t)},expression:"queryInfo.card"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"用户",clearable:""},model:{value:e.queryInfo.nike,callback:function(t){e.$set(e.queryInfo,"nike",t)},expression:"queryInfo.nike"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.cars,border:"",stripe:""}},[a("el-table-column",{attrs:{width:"50",label:"序号",align:"center",type:"index"}}),a("el-table-column",{attrs:{label:"用户",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.nike)+" ")]}}])}),a("el-table-column",{attrs:{label:"车牌号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.card)+" ")]}}])}),a("el-table-column",{attrs:{label:"联系电话",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.phone)+" ")]}}])}),a("el-table-column",{attrs:{label:"停车地点",prop:"stallArea",align:"center"}}),a("el-table-column",{attrs:{label:"停车车位",prop:"stallNum",align:"center"}})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},Ee=[],Re={data:function(){return{total:0,loading:!0,queryInfo:{nike:"",card:"",pagenum:1,pageSize:5},cars:[]}},methods:{getList:function(){var e=this;f.a.post("/api/car/getCar",this.queryInfo).then((function(t){e.loading=!1,e.total=t.data.data.total,e.cars=t.data.data.records}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()}},mounted:function(){this.getList()}},ze=Re,Le=Object(i["a"])(ze,Oe,Ee,!1,null,null,null),Ge=Le.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("系统管理")]),a("el-breadcrumb-item",[e._v("用户管理")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.queryInfo.username,callback:function(t){e.$set(e.queryInfo,"username",t)},expression:"queryInfo.username"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入昵称",clearable:""},model:{value:e.queryInfo.nike,callback:function(t){e.$set(e.queryInfo,"nike",t)},expression:"queryInfo.nike"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入车牌号",clearable:""},model:{value:e.queryInfo.card,callback:function(t){e.$set(e.queryInfo,"card",t)},expression:"queryInfo.card"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")])],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.users,border:"",stripe:""}},[a("el-table-column",{attrs:{width:"50",label:"序号",align:"center",type:"index"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username",align:"center"}}),a("el-table-column",{attrs:{label:"昵称",prop:"nike",align:"center"}}),a("el-table-column",{attrs:{label:"性别",prop:"sex",align:"center"}}),a("el-table-column",{attrs:{label:"联系电话",prop:"phone",align:"center"}}),a("el-table-column",{attrs:{label:"车牌号",prop:"card",align:"center"}}),a("el-table-column",{attrs:{label:"账户余额",prop:"money",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.money?a("span",[e._v(e._s(t.row.money)+"元")]):a("span",[e._v("0元")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["admin"!=t.row.username?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}):e._e(),"admin"!=t.row.username?a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh",circle:""},on:{click:function(a){return e.rePassword(t.row.uid)}}}):e._e(),"admin"!=t.row.username?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.userDelete(t.row.uid)}}}):e._e(),"admin"==t.row.username?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",disabled:""},on:{click:function(a){return e.toEdit(t.row)}}}):e._e(),"admin"==t.row.username?a("el-button",{attrs:{disabled:"",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.userDelete(t.row.uid)}}}):e._e()]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改用户",visible:e.editShow,width:"450px",center:""},on:{"update:visible":function(t){e.editShow=t},close:e.editClose}},[a("el-form",{ref:"editRules",attrs:{model:e.editUser,rules:e.editRules,"label-width":"80px"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"昵称",prop:"nike"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.editUser.nike,callback:function(t){e.$set(e.editUser,"nike",t)},expression:"editUser.nike"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"密码",prop:"password"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{"show-password":""},model:{value:e.editUser.password,callback:function(t){e.$set(e.editUser,"password",t)},expression:"editUser.password"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"余额",prop:"money"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.editUser.money,callback:function(t){e.$set(e.editUser,"money",e._n(t))},expression:"editUser.money"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.editUser.phone,callback:function(t){e.$set(e.editUser,"phone",t)},expression:"editUser.phone"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"车牌号",prop:"card"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.editUser.card,callback:function(t){e.$set(e.editUser,"card",t)},expression:"editUser.card"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"性别"}},[[a("el-radio",{attrs:{label:"男"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:e.editUser.sex,callback:function(t){e.$set(e.editUser,"sex",t)},expression:"editUser.sex"}},[e._v("女")])]],2),a("el-form-item",{staticClass:"is-required",attrs:{label:"年龄",prop:"age"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.editUser.age,callback:function(t){e.$set(e.editUser,"age",e._n(t))},expression:"editUser.age"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.editClose()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCommit("editRules")}}},[e._v("确认修改")])],1)],1),a("el-dialog",{attrs:{title:"新增用户",visible:e.addShow,width:"500px",center:""},on:{"update:visible":function(t){e.addShow=t},close:e.addClose}},[a("el-form",{ref:"registerRules",staticClass:"demo-ruleForm",attrs:{model:e.registerUser,"status-icon":"",rules:e.registerRules,"label-width":"100px"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"用户名",prop:"username"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名"},model:{value:e.registerUser.username,callback:function(t){e.$set(e.registerUser,"username",t)},expression:"registerUser.username"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"密码",prop:"password"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.registerUser.password,callback:function(t){e.$set(e.registerUser,"password",t)},expression:"registerUser.password"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"昵称",prop:"nike"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入昵称"},model:{value:e.registerUser.nike,callback:function(t){e.$set(e.registerUser,"nike",t)},expression:"registerUser.nike"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"性别",prop:"sex"}},[a("el-radio",{attrs:{label:"男"},model:{value:e.registerUser.sex,callback:function(t){e.$set(e.registerUser,"sex",t)},expression:"registerUser.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"},model:{value:e.registerUser.sex,callback:function(t){e.$set(e.registerUser,"sex",t)},expression:"registerUser.sex"}},[e._v("女")])],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"年龄",prop:"age"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.registerUser.age,callback:function(t){e.$set(e.registerUser,"age",e._n(t))},expression:"registerUser.age"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"车牌号",prop:"card"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入车牌号"},model:{value:e.registerUser.card,callback:function(t){e.$set(e.registerUser,"card",t)},expression:"registerUser.card"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入联系电话"},model:{value:e.registerUser.phone,callback:function(t){e.$set(e.registerUser,"phone",t)},expression:"registerUser.phone"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.addClose()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("registerRules")}}},[e._v("确认添加")])],1)],1)],1)},Fe=[],Ae={data:function(){var e=function(e,t,a){if(!t)return a(new Error("用户名不能为空"));setTimeout((function(){f.a.get("/api/user/checkUsername?username="+t).then((function(e){e.data.data?a():a(new Error("用户名已存在"))}))}),10)},t=function(e,t,a){if(!t)return a(new Error("年龄不能为空"));setTimeout((function(){Number.isInteger(t)?t<18?a(new Error("必须年满18岁")):a():a(new Error("请输入数字值"))}),1e3)};return{total:0,loading:!0,queryInfo:{username:"",nike:"",card:"",pagenum:1,pageSize:6},users:[],editUser:{password:"",nike:"",sex:"",age:"",phone:"",money:"",card:""},registerUser:{sex:"男"},addShow:!1,editShow:!1,editRules:{niek:[{required:!0,message:"请输入昵称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],age:[{validator:t,trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],card:[{required:!0,message:"请输入车牌号",trigger:"blur"}]},registerRules:{username:[{validator:e,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],niek:[{required:!0,message:"请输入昵称",trigger:"blur"}],age:[{validator:t,trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],card:[{required:!0,message:"请输入车牌号",trigger:"blur"}]}}},methods:{getList:function(){var e=this;f.a.post("/api/user/getUsers",this.queryInfo).then((function(t){e.loading=!1,e.total=t.data.data.total,e.users=t.data.data.records}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()},addUser:function(){for(var e in this.registerUser)this.registerUser[e]="";this.registerUser.sex="男",this.addShow=!0},editClose:function(){var e=this;this.editShow=!1,this.$nextTick((function(){e.$refs.editRules.resetFields()}))},toEdit:function(e){this.editUser.uid=e.uid,this.editUser.password=e.password,this.editUser.nike=e.nike,this.editUser.sex=e.sex,this.editUser.age=e.age,this.editUser.phone=e.phone,this.editUser.money=e.money,this.editUser.card=e.card,this.editShow=!0},editCommit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;f.a.post("/api/user/update",t.editUser).then((function(e){e.data.flag?(t.$message.success("修改成功！"),t.getList()):t.$message.error("修改失败！"),t.editShow=!1}))}))},userDelete:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消删除！"):f.a.get("/api/user/del?uid="+e).then((function(e){e.data.data?(t.$message.success("删除成功！"),t.getList()):t.$message.error("删除失败！")}));case 4:case"end":return a.stop()}}),a)})))()},rePassword:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("重置该用户的密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:r=a.sent,"confirm"!=r?t.$message.info("已取消操作！"):f.a.get("/api/user/release?uid="+e).then((function(e){e.data.data?(t.$message.success("重置密码成功！"),t.getList()):t.$message.error("重置密码失败！")}));case 4:case"end":return a.stop()}}),a)})))()},addClose:function(){var e=this;this.addShow=!1,this.$nextTick((function(){e.$refs.registerRules.resetFields()}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,f.a.post("/api/user/register",t.registerUser).then((function(e){t.loading=!1,e.data.data?(t.$message.success("添加成功！"),t.getList(),t.addShow=!1):t.$message.error("添加失败,请重新尝试！")}))}))}},mounted:function(){this.getList()}},De=Ae,Ne=Object(i["a"])(De,Me,Fe,!1,null,null,null),je=Ne.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"input-serch",attrs:{placeholder:"请输入商品名称"},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"最低价格"},model:{value:e.queryInfo.min,callback:function(t){e.$set(e.queryInfo,"min",t)},expression:"queryInfo.min"}})],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"最高价格"},model:{value:e.queryInfo.max,callback:function(t){e.$set(e.queryInfo,"max",t)},expression:"queryInfo.max"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchGoods}},[e._v("搜索")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.toAdd}},[e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.goods,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"gname",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"mprice",label:"市场价格"}}),a("el-table-column",{attrs:{prop:"gprice",label:"出售价格"}}),a("el-table-column",{attrs:{prop:"num",label:"数量"}}),a("el-table-column",{attrs:{prop:"hot",label:"热度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"热门","inactive-text":"普通"},on:{change:function(a){return e.hotChange(t.row.gid,t.row.hot)}},model:{value:t.row.hot,callback:function(a){e.$set(t.row,"hot",a)},expression:"scope.row.hot"}})]}}])}),a("el-table-column",{attrs:{label:"上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-text":"上架","inactive-text":"下架"},on:{change:function(a){return e.sellChange(t.row.gid,t.row.sell)}},model:{value:t.row.sell,callback:function(a){e.$set(t.row,"sell",a)},expression:"scope.row.sell"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteGoods(t.row.gid)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pageIndex,"page-sizes":[5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改商品",visible:e.editShow,width:"50%",center:""},on:{"update:visible":function(t){e.editShow=t},close:e.editClose}},[a("el-form",{ref:"editRules",attrs:{model:e.editGoods,rules:e.editRules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"gname"}},[a("el-input",{model:{value:e.editGoods.gname,callback:function(t){e.$set(e.editGoods,"gname",t)},expression:"editGoods.gname"}})],1),a("el-form-item",{attrs:{label:"市场价格",prop:"mprice"}},[a("el-input",{attrs:{type:"number"},model:{value:e.editGoods.mprice,callback:function(t){e.$set(e.editGoods,"mprice",t)},expression:"editGoods.mprice"}})],1),a("el-form-item",{attrs:{label:"出售价格",prop:"gprice"}},[a("el-input",{attrs:{type:"number"},model:{value:e.editGoods.gprice,callback:function(t){e.$set(e.editGoods,"gprice",t)},expression:"editGoods.gprice"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"num"}},[a("el-input",{attrs:{type:"number"},model:{value:e.editGoods.num,callback:function(t){e.$set(e.editGoods,"num",t)},expression:"editGoods.num"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.editClose("editRules")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCommit("editRules")}}},[e._v("确认修改")])],1)],1)],1)},Be=[],Ye={data:function(){var e=function(e,t,a){""===t?a(new Error("请输入市场价格")):isNaN(parseFloat(t))?a(new Error("请输正确的数值")):a()};return{loading:!0,searchValue:"",goods:[],editGoods:{gid:"",gname:"",mprice:"",gprice:"",num:"",color:"",weight:"",gadress:""},editShow:!1,queryInfo:{query:"",min:"",max:"",pageIndex:1,pageSize:5},total:0,editRules:{gname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],mprice:[{required:!0,validator:e,trigger:"blur"}],gprice:[{required:!0,message:"请输入出售价格",trigger:"blur"}],num:[{required:!0,message:"请输入商品数量",trigger:"blur"}]}}},methods:{searchGoods:function(){this.getGoods()},hotChange:function(e,t){var a=this,r=1==t?1:0;f.a.get("api/ssm/goods/updateGoodsHot?gid="+e+"&hot="+r).then((function(e){e.data.flag?a.$message.success("修改成功！"):(a.$message.error("修改失败！"),a.getGoods())}))},sellChange:function(e,t){var a=this,r=1==t?1:0;f.a.get("api/ssm/goods/updateGoodsSell?gid="+e+"&sell="+r).then((function(e){e.data.flag?a.$message.success("修改成功！"):(a.$message.error("修改失败！"),a.getGoods())}))},toEdit:function(e){this.editGoods.gid=e.gid,this.editGoods.gname=e.gname,this.editGoods.mprice=e.mprice,this.editGoods.gprice=e.gprice,this.editGoods.num=e.num,this.editGoods.gadress=e.gadress,this.editGoods.color=e.color,this.editGoods.weight=e.weight,this.editGoods.sid=e.sid,this.editShow=!0},editClose:function(){var e=this;this.editShow=!1,this.$nextTick((function(){e.$refs.editRules.resetFields()}))},toAdd:function(){this.$router.push("/addshop")},checkGname:function(){this.editGoods.gname},editCommit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;f.a.post("/api/ssm/goods/updateGoodsBase",t.editGoods).then((function(e){e.data.flag?(t.$message.success("修改成功！"),t.getGoods()):t.$message.error("修改失败！"),t.editShow=!1}))}))},deleteGoods:function(e){var t=this;this.$confirm("此操作将永久删除该商品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){f.a.get("/api/ssm/goods/deleteGoodsById?gid="+e).then((function(e){e.data.flag?(t.getGoods(),t.$message.success("删除成功！")):t.$message.error("删除失败！")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getGoods()},handleCurrentChange:function(e){this.queryInfo.pageIndex=e,this.getGoods()},getGoods:function(){var e=this;f.a.post("api/ssm/goods/getGoodsByFenye",this.queryInfo).then((function(t){for(var a in e.loading=!1,e.goods=t.data.list,e.total=t.data.count,e.goods)e.goods[a].sell=1==e.goods[a].sell,e.goods[a].hot=1==e.goods[a].hot}))}},mounted:function(){this.getGoods()}},Ve=Ye,He=(a("b287"),Object(i["a"])(Ve,Pe,Be,!1,null,"57a26498",null)),Ze=He.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("订单管理")]),a("el-breadcrumb-item",[e._v("订单列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.queryInfo.uname,callback:function(t){e.$set(e.queryInfo,"uname",t)},expression:"queryInfo.uname"}})],1),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入商品名",clearable:""},model:{value:e.queryInfo.gname,callback:function(t){e.$set(e.queryInfo,"gname",t)},expression:"queryInfo.gname"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.orders,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.uname)+" ")]}}])}),a("el-table-column",{attrs:{label:"购买商品"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.goods.gname)+" ")]}}])}),a("el-table-column",{attrs:{label:"数量",align:"center",prop:"ocount"}}),a("el-table-column",{attrs:{label:"商品状态",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.ostate?a("el-tag",{attrs:{type:"info"}},[e._v("未发货")]):e._e(),1==t.row.ostate?a("el-tag",[e._v("已发货")]):e._e(),2==t.row.ostate?a("el-tag",{attrs:{type:"warning"}},[e._v("运输中")]):e._e(),3==t.row.ostate?a("el-tag",{attrs:{type:"warning"}},[e._v("待收货")]):e._e(),4==t.row.ostate?a("el-tag",{attrs:{type:"success"}},[e._v("已签收")]):e._e(),4==t.row.ostate?a("el-tag",{attrs:{type:"danger"}},[e._v("未评论")]):e._e(),5==t.row.ostate?a("el-tag",{attrs:{type:"success"}},[e._v("已签收")]):e._e(),5==t.row.ostate?a("el-tag",{attrs:{type:"success"}},[e._v("已评论")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ￥"+e._s(t.row.oprice.toFixed(2))+" ")]}}])}),a("el-table-column",{attrs:{label:"总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ￥"+e._s(t.row.tprice.toFixed(2))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}),a("el-button",{attrs:{type:"warning",icon:"el-icon-tickets",circle:""},on:{click:function(a){return e.toDetail(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pageIndex,"page-sizes":[5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改订单信息",visible:e.editOrderShow,width:"50%",center:""},on:{"update:visible":function(t){e.editOrderShow=t},close:function(t){e.editOrderShow=!1}}},[a("el-form",{attrs:{model:e.editOrderInfo,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"收货人姓名：",width:"100px"}},[a("el-input",{model:{value:e.editOrderInfo.recipient.rname,callback:function(t){e.$set(e.editOrderInfo.recipient,"rname",t)},expression:"editOrderInfo.recipient.rname"}})],1),a("el-form-item",{attrs:{label:"收货人电话：",width:"100px"}},[a("el-input",{model:{value:e.editOrderInfo.recipient.rtelephone,callback:function(t){e.$set(e.editOrderInfo.recipient,"rtelephone",t)},expression:"editOrderInfo.recipient.rtelephone"}})],1),a("el-form-item",{attrs:{label:"收货人地址：",width:"100px"}},[a("el-input",{model:{value:e.editOrderInfo.recipient.radress,callback:function(t){e.$set(e.editOrderInfo.recipient,"radress",t)},expression:"editOrderInfo.recipient.radress"}})],1),a("el-form-item",{attrs:{label:"商品状态：",width:"100px",prop:"ostate"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.checkedState,callback:function(t){e.checkedState=t},expression:"checkedState"}},e._l(e.states,(function(e){return a("el-option",{key:e.ostate,attrs:{label:e.value,value:e.ostate}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.editClose()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCommit()}}},[e._v("提交")])],1)],1),a("el-dialog",{attrs:{title:"订单详细信息",visible:e.detailShow,width:"50%",center:""},on:{"update:visible":function(t){e.detailShow=t},close:function(t){e.detailShow=!1}}},[a("div",{staticClass:"order-detail"},[a("p",[a("span",[e._v("订单编号:")]),e._v(" "+e._s(e.detailOrder.oid)+"------- 创建时间："+e._s(e._f("timeflow")(e.detailOrder.otime))+" ------------"),a("span",[e._v("订单状态：")]),0==e.detailOrder.ostate?a("el-tag",{attrs:{type:"info"}},[e._v("未发货")]):e._e(),1==e.detailOrder.ostate?a("el-tag",[e._v("已发货")]):e._e(),2==e.detailOrder.ostate?a("el-tag",{attrs:{type:"warning"}},[e._v("运输中")]):e._e(),3==e.detailOrder.ostate?a("el-tag",{attrs:{type:"warning"}},[e._v("待收货")]):e._e(),4==e.detailOrder.ostate?a("el-tag",{attrs:{type:"success"}},[e._v("已签收")]):e._e(),4==e.detailOrder.ostate?a("el-tag",{attrs:{type:"danger"}},[e._v("未评论")]):e._e(),5==e.detailOrder.ostate?a("el-tag",{attrs:{type:"success"}},[e._v("已签收")]):e._e(),5==e.detailOrder.ostate?a("el-tag",{attrs:{type:"success"}},[e._v("已评论")]):e._e()],1),a("p",[a("span",[e._v("商品名称：")]),e._v(e._s(e.detailOrder.goods.gname)+"------- "),a("span",[e._v("购买单价：")]),e._v(e._s(e.detailOrder.oprice.toFixed(2))+"---- "),a("span",[e._v("购买数量：")]),e._v(e._s(e.detailOrder.ocount)+"---- "),a("span",[e._v("付款：")]),e._v(e._s(e.detailOrder.tprice.toFixed(2))+" ")]),a("p",[a("span",[e._v("购买姓名：")]),e._v(e._s(e.detailOrder.user.uname)+"---- "),a("span",[e._v("购买人电话：")]),e._v(e._s(e.detailOrder.user.telephone)+"---- "),a("span",[e._v("购买人邮箱：")]),e._v(e._s(e.detailOrder.user.email)+" ")]),a("p",[a("span",[e._v("收货人姓名：")]),e._v(e._s(e.detailOrder.recipient.rname)+"----- "),a("span",[e._v("收货人电话：")]),e._v(e._s(e.detailOrder.recipient.rtelephone)),a("br"),a("br"),a("span",[e._v("收货人地址：")]),e._v(e._s(e.detailOrder.recipient.radress)+" ")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.detailShow=!1}}},[e._v("确定")])],1)])],1)},We=[];a("4de4");r["default"].filter("timeflow",(function(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}));var Xe={data:function(){return{loading:!1,orders:[],total:0,editOrderShow:!1,checkedState:"",detailShow:!1,detailOrder:{oprice:0,tprice:0,goods:{},user:{},recipient:{}},recipient:{rname:"",rtelephone:"",radress:""},editOrderInfo:{recipient:{rname:"",rtelephone:"",radress:""},ostate:"",oid:""},states:[{ostate:"0",value:"未发货"},{ostate:"1",value:"已发货"},{ostate:"2",value:"运输中"},{ostate:"3",value:"待签收"},{ostate:"4",value:"已签收"},{ostate:"5",value:"已评价"}],queryInfo:{uname:"",gname:"",pageIndex:1,pageSize:5}}},methods:{getOrders:function(){var e=this;f.a.post("/api/ssm/orders/getOrdersByFenye",this.queryInfo).then((function(t){e.orders=t.data.list,e.total=t.data.count}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getOrders()},handleCurrentChange:function(e){this.queryInfo.pageIndex=e,this.getOrders()},search:function(){this.getOrders()},toEdit:function(e){this.checkedState=e.ostate,this.recipient.rname=e.recipient.rname,this.recipient.rtelephone=e.recipient.rtelephone,this.recipient.radress=e.recipient.radress,this.editOrderInfo.recipient=e.recipient,this.editOrderInfo.oid=e.oid,this.editOrderShow=!0},toDetail:function(e){this.detailOrder=e,this.detailShow=!0},editClose:function(){this.editOrderShow=!1},editCommit:function(){var e=this,t=!0;this.editOrderInfo.recipient.rname!=this.recipient.rname&&(t=!1),this.editOrderInfo.recipient.rtelephone!=this.recipient.rtelephone&&(t=!1),this.editOrderInfo.recipient.radress!=this.recipient.radress&&(t=!1),t?f.a.get("/api/ssm/orders/updateOrderState?oid="+this.editOrderInfo.oid+"&state="+this.checkedState).then((function(t){t.data.flag?(e.getOrders(),e.$message.success("修改成功！"),e.editOrderShow=!1):e.$message.error("修改失败！")})):f.a.post("/api/ssm/orders/updateOrderBase",{oid:this.editOrderInfo.oid,ostate:this.checkedState,rid:this.editOrderInfo.recipient.rid,rname:this.editOrderInfo.recipient.rname,radress:this.editOrderInfo.recipient.radress,rtelephone:this.editOrderInfo.recipient.rtelephone}).then((function(t){t.data.flag?(e.getOrders(),e.$message.success("修改成功！"),e.editOrderShow=!1):e.$message.error("修改失败！")}))}},mounted:function(){this.getOrders()}},Ke=Xe,Qe=Object(i["a"])(Ke,Je,We,!1,null,"6452efba",null),et=Qe.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" 商品销量前十统计图 "),a("div",{style:{width:"1200px",height:"600px"},attrs:{id:"myChart"}})])},at=[],rt=(a("313e"),{data:function(){return{dataName:[],dataCount:[],dataList:[]}},methods:{drawLine:function(){var e=a("313e"),t=e.init(document.getElementById("myChart")),r=r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"10%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.dataName,axisTick:{alignWithLabel:!0},axisLabel:{rotate:10,textStyle:{color:"blue"}}}],yAxis:[{type:"value"}],series:[{name:"商品销量",type:"bar",barWidth:"60%",data:this.dataList}]};t.setOption(r)}},mounted:function(){var e=this;f.a.get("/api/ssm/orders/getOrderGoodData").then((function(t){for(var a in t.data)e.dataName.push(t.data[a].gname),e.dataList.push(t.data[a].num);e.drawLine()}))}}),st=rt,nt=(a("ea2b"),Object(i["a"])(st,tt,at,!1,null,"25047fd4",null)),it=nt.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品添加")])],1),a("el-card",[a("el-button",{attrs:{type:"primary"},on:{click:e.toShop}},[e._v("返回商品列表")]),a("el-form",{ref:"addRules",attrs:{model:e.addGoods,rules:e.addRules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"商品类型",prop:"sid"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.shopTypeSid,callback:function(t){e.shopTypeSid=t},expression:"shopTypeSid"}},e._l(e.options,(function(e){return a("el-option",{key:e.sid,attrs:{label:e.sname,value:e.sid}})})),1)],1),a("el-form-item",{attrs:{label:"商品名称",prop:"gname"}},[a("el-input",{model:{value:e.addGoods.gname,callback:function(t){e.$set(e.addGoods,"gname",t)},expression:"addGoods.gname"}})],1),a("el-form-item",{attrs:{label:"市场价格",prop:"mprice"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addGoods.mprice,callback:function(t){e.$set(e.addGoods,"mprice",t)},expression:"addGoods.mprice"}})],1),a("el-form-item",{attrs:{label:"出售价格",prop:"gprice"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addGoods.gprice,callback:function(t){e.$set(e.addGoods,"gprice",t)},expression:"addGoods.gprice"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"num"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addGoods.num,callback:function(t){e.$set(e.addGoods,"num",t)},expression:"addGoods.num"}})],1),a("el-form-item",{attrs:{label:"商品图片"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/ssm/goods/uploadImg","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.successUpload,"on-error":e.errorUpload,"file-list":e.fileList,multiple:!1,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-form-item",{attrs:{label:"商品描述",prop:"gdesc"}},[a("el-input",{model:{value:e.addGoods.gdesc,callback:function(t){e.$set(e.addGoods,"gdesc",t)},expression:"addGoods.gdesc"}})],1),a("el-form-item",{attrs:{label:"生产地址",prop:"gadress"}},[a("el-input",{model:{value:e.addGoods.gadress,callback:function(t){e.$set(e.addGoods,"gadress",t)},expression:"addGoods.gadress"}})],1),a("el-form-item",{attrs:{label:"颜色",prop:"color"}},[a("el-input",{model:{value:e.addGoods.color,callback:function(t){e.$set(e.addGoods,"color",t)},expression:"addGoods.color"}})],1),a("el-form-item",{attrs:{label:"重量",prop:"weight"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addGoods.weight,callback:function(t){e.$set(e.addGoods,"weight",t)},expression:"addGoods.weight"}})],1),a("el-form-item",{attrs:{label:"添加"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("添加商品")])],1)],1)],1)],1)},ot=[],ct={data:function(){return{addGoods:{gname:"",mprice:"",gprice:"",num:"",color:"",gdesc:"",picture:"",gadress:"",weight:"",sid:""},fileList:[],imgName:"",options:[],shopTypeSid:"",addRules:{gname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],mprice:[{required:!0,message:"请输入商品市场价格",trigger:"blur"}],gprice:[{required:!0,message:"请输入出售价格",trigger:"blur"}],num:[{required:!0,message:"请输入商品数量",trigger:"blur"}],sid:[{required:!0,message:"请选择商品类型",trigger:"blur"}],gadress:[{required:!0,message:"请输入盛产地址",trigger:"blur"}],color:[{required:!0,message:"请输入商品颜色",trigger:"blur"}],gdesc:[{required:!0,message:"请输入商品描述",trigger:"blur"}]}}},methods:{toShop:function(){this.$router.push("/shop")},handlePreview:function(e,t){},handleRemove:function(e,t){var a=this;f.a.get("/api/ssm/goods/deleteUpload?img="+this.imgName).then((function(e){a.$message.success("移除成功！")}))},successUpload:function(e,t,a){e.flag&&(this.imgName=e.img,this.$message.success("添加成功！"))},errorUpload:function(e,t,a){this.$message.console.error("添加失败！")},getShopType:function(){var e=this;f.a.get("/api/ssm/shopType/getShopTypes").then((function(t){for(var a in t.data)e.options=t.data}))},onAdd:function(){var e=this;""!=this.shopTypeSid?""!=this.imgName?(this.addGoods.picture=this.imgName,this.addGoods.sid=this.shopTypeSid,f.a.post("/api/ssm/goods/addGoods",this.addGoods).then((function(t){t.data.flag?(e.$message.success("添加成功！"),e.$router.push("/shop")):e.$message.error("添加失败！")}))):this.$message("请上传商品"):this.$message("请选择类型")}},mounted:function(){this.getShopType()}},ut=ct,dt=(a("f8da"),Object(i["a"])(ut,lt,ot,!1,null,"f4d106da",null)),pt=dt.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.viewShow?a("div",{style:{width:"1200px",height:"600px"},attrs:{id:"myChart"}}):a("div",[e._v(" 暂时没有数据....... ")])])},ft=[],gt={data:function(){return{dataName:[],dataCount:[],dataBottom:[],dataColor:[],dataList:[],dataItem:[],colorSum:[],viewShow:!0}},methods:{drawLine:function(){var e=a("313e"),t=e.init(document.getElementById("myChart")),r={color:["#80FFA5","#00DDFF","#37A2FF","#FF0087","#FFBF00"],title:{text:"商品销量图"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.dataName},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:this.dataBottom}],yAxis:[{type:"value"}],series:[{name:this.dataName[0],type:"line",stack:"总量",smooth:!0,lineStyle:{width:0},showSymbol:!1,areaStyle:{opacity:.8,color:new e.graphic.LinearGradient(0,0,0,1,[{offset:0,color:this.dataColor[0].color1},{offset:1,color:this.dataColor[0].color2}])},emphasis:{focus:"series"},data:this.dataList}]};t.setOption(r)}},mounted:function(){var e=this;a("313e");this.dataName=["销售金额[单位：元]"],this.dataColor=[{color1:"rgba(128, 255, 165)",color2:"rgba(1, 191, 236)"},{color1:"rgba(0, 221, 255)",color2:"rgba(77, 119, 255)"},{color1:"rgba(55, 162, 255)",color2:"rgba(116, 21, 219)"},{color1:"rgba(255, 0, 135)",color2:"rgba(135, 0, 157)"},{color1:"rgba(255, 191, 0)",color2:"rgba(224, 62, 76)"}],f.a.get("/api/ssm/orders/getOrderDataPrice").then((function(t){if(200===t.status)for(var a in t.data){var r=new Date(t.data[a].date),s=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();e.dataBottom.unshift(s),e.dataList.unshift(t.data[a].price),e.drawLine()}else e.viewShow=!1}))}},ht=gt,bt=(a("41da"),Object(i["a"])(ht,mt,ft,!1,null,"07cee3a2",null)),vt=bt.exports;r["default"].use(u["a"]);var yt=[{path:"/",redirect:"/login"},{path:"/login",component:v},{path:"/conmen",component:T,redirect:"/carInfo",children:[{path:"/userInfo",component:G},{path:"/carInfo",component:P},{path:"/cost",component:J}]},{path:"/mane",component:le,redirect:"/userMane",children:[{path:"/userMane",component:je},{path:"/carmaneger",component:me},{path:"/carInMane",component:ye},{path:"/stallMane",component:Ge},{path:"/money",component:Te}]},{path:"/home",component:C,redirect:"/users",children:[{path:"/users",component:te},{path:"/shop",component:Ze},{path:"/addshop",component:pt},{path:"/din",component:et},{path:"/data",component:it},{path:"/dataprice",component:vt}]}],wt=new u["a"]({routes:yt});wt.beforeEach((function(e,t,a){if("/login"===e.path)return a();var r=window.sessionStorage.getItem("token");if(!r)return a("/login");a()}));var xt=wt,_t=a("2f62");r["default"].use(_t["a"]);var kt=new _t["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Ct=(a("aede"),a("1a0a"),a("5c96")),St=a.n(Ct);a("0fae");r["default"].use(St.a),r["default"].config.productionTip=!1,new r["default"]({router:xt,store:kt,render:function(e){return e(c)}}).$mount("#app")},"5fd8":function(e,t,a){},6538:function(e,t,a){"use strict";a("c3ce")},"686d":function(e,t,a){"use strict";a("fbb0")},"85ec":function(e,t,a){},9938:function(e,t,a){},a352:function(e,t,a){"use strict";a("4927")},a760:function(e,t,a){e.exports=a.p+"img/3.2354f8ed.jpg"},ab86:function(e,t,a){e.exports=a.p+"img/4.a0f3415d.jpg"},aede:function(e,t,a){},b09c:function(e,t,a){},b287:function(e,t,a){"use strict";a("ebb5")},bc19:function(e,t,a){"use strict";a("49a5")},c19a:function(e,t,a){"use strict";a("e596")},c3ce:function(e,t,a){},cedd:function(e,t,a){e.exports=a.p+"img/2.4028f72b.jpg"},d106:function(e,t,a){"use strict";a("9938")},d992:function(e,t,a){},e4d2:function(e,t,a){"use strict";a("b09c")},e596:function(e,t,a){},ea2b:function(e,t,a){"use strict";a("ffa9")},ebb5:function(e,t,a){},f1ca:function(e,t,a){e.exports=a.p+"img/drag.80be78d7.jpg"},f8da:function(e,t,a){"use strict";a("5fd8")},fbb0:function(e,t,a){},ffa9:function(e,t,a){}});